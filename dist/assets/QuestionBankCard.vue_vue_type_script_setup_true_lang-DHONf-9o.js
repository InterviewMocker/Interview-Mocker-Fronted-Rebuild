import{o as t,c as r,a as o,d as B,e as j,n as H,F as g,g as b,p as a,t as i,f as d,i as l,h as A,x,j as c}from"./index-B1_3jWiP.js";import{r as N}from"./ClockIcon-Sdcm571c.js";import{a as S,r as D}from"./XCircleIcon-wm93KZle.js";import{r as M}from"./PencilIcon-Cx_SwFD1.js";import{r as z}from"./TrashIcon-dWnjABfe.js";function F(e,y){return t(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}function L(e,y){return t(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const E={key:0,class:"absolute -top-2 -right-2 z-10"},O={class:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-bold bg-primary-500 text-white shadow-lg shadow-primary-500/30"},P={class:"flex flex-col h-full"},Q={class:"flex items-start justify-between mb-3"},R={class:"flex items-center gap-2"},T={key:0,class:"px-2 py-0.5 rounded text-xs font-medium bg-primary-900/30 text-primary-400 border border-primary-800/50"},U={key:0,class:"px-2 py-0.5 rounded text-xs font-medium bg-warning-900/30 text-warning-400 border border-warning-800/50 flex items-center gap-1"},Z={key:1,class:"px-2 py-0.5 rounded text-xs font-medium bg-error-900/30 text-error-400 border border-error-800/50 flex items-center gap-1"},q={key:2,class:"px-2 py-0.5 rounded text-xs font-medium bg-success-900/30 text-success-400 border border-success-800/50"},G={key:3,class:"px-2 py-0.5 rounded text-xs font-medium bg-dark-800 text-gray-400 border border-gray-700"},I={class:"text-lg font-semibold text-gray-100 group-hover:text-primary-400 transition-colors mb-2"},J={class:"text-xs text-gray-500 mb-2 flex items-center gap-2"},K={key:0},W={key:1},X={class:"text-sm text-gray-400 line-clamp-2 mb-4 flex-1"},Y={key:0,class:"flex flex-wrap gap-2 mt-auto"},_={key:0,class:"text-xs text-gray-500 self-center"},ee={class:"absolute top-4 right-4 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},ne=B({__name:"QuestionBankCard",props:{bank:{},isCommunityView:{type:Boolean}},emits:["click","edit","delete","apply","copy"],setup(e,{emit:y}){const u=e,m=y,w=j(),C=c(()=>{var h;return u.bank.created_by===((h=w.user)==null?void 0:h.id)}),k=c(()=>u.bank.community_status==="approved"),p=c(()=>u.bank.community_status==="pending"),V=c(()=>u.bank.community_status==="rejected"),v=c(()=>u.isCommunityView?C.value:k.value),$=c(()=>v.value?"ring-1 ring-primary-500/50 bg-primary-900/10":"");return(h,s)=>{var f;return t(),r("div",{onClick:s[4]||(s[4]=n=>m("click",e.bank.id)),class:H(["glass-card p-5 cursor-pointer flex flex-col h-full group hover:-translate-y-1 relative transition-all duration-300",$.value])},[v.value?(t(),r("div",E,[o("span",O,[e.isCommunityView?(t(),r(g,{key:0},[b("我的上传")],64)):(t(),r(g,{key:1},[b("已上架社区")],64))])])):a("",!0),o("div",P,[o("div",Q,[o("div",R,[e.bank.category?(t(),r("span",T,i(e.bank.category),1)):a("",!0),e.isCommunityView?a("",!0):(t(),r(g,{key:1},[p.value?(t(),r("span",U,[d(l(N),{class:"w-3 h-3"}),s[5]||(s[5]=b(" 审核中 ",-1))])):V.value?(t(),r("span",Z,[d(l(S),{class:"w-3 h-3"}),s[6]||(s[6]=b(" 已拒绝 ",-1))])):e.bank.status==="active"?(t(),r("span",q," 活跃 ")):(t(),r("span",G," 停用 "))],64))]),d(l(L),{class:"w-6 h-6 text-gray-500 group-hover:opacity-0 transition-opacity"})]),o("h3",I,i(e.bank.name),1),o("div",J,[e.bank.creator_username?(t(),r("span",K," 创建人: "+i(e.bank.creator_username),1)):a("",!0),e.bank.created_at?(t(),r("span",W,i(new Date(e.bank.created_at).toLocaleDateString()),1)):a("",!0)]),o("p",X,i(e.bank.description||"暂无描述"),1),(f=e.bank.tags)!=null&&f.length?(t(),r("div",Y,[(t(!0),r(g,null,A(e.bank.tags.slice(0,3),n=>(t(),r("span",{key:n,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-dark-800/50 text-gray-400 border border-white/10"},i(n),1))),128)),e.bank.tags.length>3?(t(),r("span",_," +"+i(e.bank.tags.length-3),1)):a("",!0)])):a("",!0)]),o("div",ee,[e.isCommunityView?(t(),r("button",{key:0,onClick:s[0]||(s[0]=x(n=>m("copy",e.bank.id),["stop"])),class:"p-1.5 rounded-lg bg-primary-900/20 hover:bg-primary-900/40 text-primary-400 hover:text-primary-300 border border-primary-900/30 transition-colors",title:"复制到我的题库"},[d(l(F),{class:"w-4 h-4"})])):(t(),r(g,{key:1},[!k.value&&!p.value?(t(),r("button",{key:0,onClick:s[1]||(s[1]=x(n=>m("apply",e.bank.id),["stop"])),class:"p-1.5 rounded-lg bg-accent-900/20 hover:bg-accent-900/40 text-accent-400 hover:text-accent-300 border border-accent-900/30 transition-colors",title:"发布到社区"},[d(l(D),{class:"w-4 h-4"})])):a("",!0),o("button",{onClick:s[2]||(s[2]=x(n=>m("edit",e.bank.id),["stop"])),class:"p-1.5 rounded-lg bg-dark-800 hover:bg-dark-700 text-gray-300 hover:text-white border border-white/10 transition-colors",title:"编辑"},[d(l(M),{class:"w-4 h-4"})]),o("button",{onClick:s[3]||(s[3]=x(n=>m("delete",e.bank.id),["stop"])),class:"p-1.5 rounded-lg bg-error-900/20 hover:bg-error-900/40 text-error-400 hover:text-error-300 border border-error-900/30 transition-colors",title:"删除"},[d(l(z),{class:"w-4 h-4"})])],64))])],2)}}});export{ne as _,L as r};
