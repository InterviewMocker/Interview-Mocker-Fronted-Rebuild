import{d as V,k as S,l as j,c as o,a as e,f as i,i as d,m as f,v as _,F as u,h as p,p as y,q as v,s as z,u as B,o as r,t as l}from"./index-B1_3jWiP.js";import{l as F}from"./knowledge-f1rcMVA6.js";import{r as L}from"./PlusIcon-OubMv-v3.js";import{r as N}from"./MagnifyingGlassIcon-16jXXFvc.js";import{r as h}from"./DocumentTextIcon-CYhgIdGt.js";import{r as T}from"./EyeIcon-CMMWXBs1.js";import{r as q}from"./ClockIcon-Sdcm571c.js";const K={class:"min-h-screen p-6 lg:p-8"},M={class:"max-w-7xl mx-auto space-y-8 animate-fade-in"},U={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},E={class:"glass-nav rounded-xl p-4 border border-white/5 flex flex-wrap items-center gap-4"},P={class:"flex items-center gap-2 text-gray-400"},R=["value"],A=["value"],G={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},H={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},I=["onClick"],J={class:"flex items-start justify-between mb-3"},O={class:"flex items-center gap-2"},Q={key:0,class:"px-2 py-0.5 rounded text-xs font-medium bg-primary-900/30 text-primary-400 border border-primary-800/50"},W={key:1,class:"px-2 py-0.5 rounded text-xs font-medium bg-accent-900/30 text-accent-400 border border-accent-800/50"},X={class:"text-lg font-semibold text-gray-100 group-hover:text-primary-400 transition-colors mb-2 line-clamp-2"},Y={class:"text-sm text-gray-400 line-clamp-3 mb-4 flex-1"},Z={class:"flex items-center gap-4 text-xs text-gray-500 mt-auto pt-4 border-t border-white/5"},ee={class:"flex items-center gap-1"},te={class:"flex items-center gap-1"},se={key:2,class:"text-center py-20 text-gray-500"},ae={key:3,class:"flex justify-center gap-2 mt-8"},oe=["disabled"],re=["disabled"],be=V({__name:"KnowledgeList",setup(le){const x=B(),m=v([]),g=v(0),b=v(!1),a=z({page:1,page_size:12,category:"",doc_type:""}),w=[{label:"全部",value:""},{label:"前端",value:"frontend"},{label:"后端",value:"backend"},{label:"算法",value:"algorithm"},{label:"系统设计",value:"system"}],k=[{label:"全部",value:""},{label:"技术文档",value:"技术文档"},{label:"面试题解",value:"面试题解"},{label:"最佳实践",value:"最佳实践"}];async function c(){b.value=!0;try{const n=await F(a);m.value=n.data.items,g.value=n.data.total}catch(n){console.error("Failed to fetch documents:",n)}finally{b.value=!1}}function C(){a.page=1,c()}S(()=>[a.category,a.doc_type],()=>{C()});function $(n){x.push(`/knowledge/${n}`)}function D(){x.push("/knowledge/create")}return j(()=>{c()}),(n,s)=>(r(),o("div",K,[e("div",M,[e("div",U,[s[5]||(s[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gradient"}," 知识库 "),e("p",{class:"text-gray-400 mt-1"},"面试知识点、技术文档与最佳实践")],-1)),e("button",{onClick:D,class:"btn-primary flex items-center gap-2"},[i(d(L),{class:"w-5 h-5"}),s[4]||(s[4]=e("span",null,"新建文档",-1))])]),e("div",E,[e("div",P,[i(d(N),{class:"w-5 h-5"}),s[6]||(s[6]=e("span",{class:"text-sm font-medium"},"筛选：",-1))]),f(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.category=t),class:"bg-dark-900/50 border border-white/10 text-white text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5 outline-none backdrop-blur-sm transition-all hover:border-white/20"},[(r(),o(u,null,p(w,t=>e("option",{key:t.value,value:t.value},l(t.label||"全部分类"),9,R)),64))],512),[[_,a.category]]),f(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.doc_type=t),class:"bg-dark-900/50 border border-white/10 text-white text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5 outline-none backdrop-blur-sm transition-all hover:border-white/20"},[(r(),o(u,null,p(k,t=>e("option",{key:t.value,value:t.value},l(t.label||"全部类型"),9,A)),64))],512),[[_,a.doc_type]])]),b.value?(r(),o("div",G,[(r(),o(u,null,p(6,t=>e("div",{key:t,class:"h-48 bg-dark-900/50 rounded-xl animate-pulse border border-white/5"})),64))])):m.value.length>0?(r(),o("div",H,[(r(!0),o(u,null,p(m.value,t=>(r(),o("div",{key:t.id,onClick:ne=>$(t.id),class:"glass-card p-5 cursor-pointer flex flex-col h-full group hover:-translate-y-1"},[e("div",J,[e("div",O,[t.category?(r(),o("span",Q,l(t.category),1)):y("",!0),t.doc_type?(r(),o("span",W,l(t.doc_type),1)):y("",!0)]),i(d(h),{class:"w-5 h-5 text-gray-500 group-hover:text-primary-400 transition-colors"})]),e("h3",X,l(t.title),1),e("p",Y,l(t.summary||"暂无摘要"),1),e("div",Z,[e("div",ee,[i(d(T),{class:"w-3.5 h-3.5"}),e("span",null,l(t.view_count),1)]),e("div",te,[i(d(q),{class:"w-3.5 h-3.5"}),e("span",null,l(new Date(t.created_at).toLocaleDateString()),1)])])],8,I))),128))])):(r(),o("div",se,[i(d(h),{class:"w-16 h-16 mx-auto mb-4 opacity-20"}),s[7]||(s[7]=e("p",null,"暂无文档，开始创建你的第一个知识库文档吧",-1))])),g.value>a.page_size?(r(),o("div",ae,[e("button",{disabled:a.page===1,onClick:s[2]||(s[2]=t=>{a.page--,c()}),class:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," 上一页 ",8,oe),e("button",{disabled:a.page*a.page_size>=g.value,onClick:s[3]||(s[3]=t=>{a.page++,c()}),class:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," 下一页 ",8,re)])):y("",!0)])]))}});export{be as default};
