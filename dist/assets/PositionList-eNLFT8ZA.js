import{d as V,l as z,c as s,a as t,f as n,i as d,m as B,v as F,F as p,h as x,H as _,p as c,q as v,s as M,u as T,o,t as l,n as L,g as k,x as w}from"./index-B1_3jWiP.js";import{l as S,d as E}from"./position-DiI746tR.js";import{r as H}from"./PlusIcon-OubMv-v3.js";import{r as R}from"./MagnifyingGlassIcon-16jXXFvc.js";import{r as U}from"./DocumentTextIcon-CYhgIdGt.js";import{r as A}from"./ClockIcon-Sdcm571c.js";import{r as G}from"./PencilIcon-Cx_SwFD1.js";import{r as I}from"./TrashIcon-dWnjABfe.js";const J={class:"min-h-screen p-6 lg:p-8"},K={class:"max-w-7xl mx-auto space-y-8 animate-fade-in"},O={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Q={class:"glass-nav rounded-xl p-4 border border-white/5 flex flex-wrap items-center gap-4"},W={class:"flex items-center gap-2 text-gray-400"},X=["value"],Y={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Z={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ee=["onClick"],te={class:"flex flex-col h-full"},re={class:"flex items-start justify-between mb-3"},se={class:"flex items-center gap-2"},oe={key:0,class:"px-2 py-0.5 rounded text-xs font-medium bg-primary-900/30 text-primary-400 border border-primary-800/50"},ae={class:"text-lg font-semibold text-gray-100 group-hover:text-primary-400 transition-colors mb-2"},ie={class:"flex flex-wrap gap-2 mb-4"},le={key:0,class:"px-2 py-0.5 rounded text-xs bg-secondary-900/30 text-secondary-400 border border-secondary-800/50"},ne={class:"flex items-center gap-1 text-xs text-gray-400 bg-dark-800/50 px-2 py-0.5 rounded border border-white/10"},de={class:"flex items-center gap-1 text-xs text-gray-400 bg-dark-800/50 px-2 py-0.5 rounded border border-white/10"},ce={key:0,class:"flex flex-wrap gap-2 mt-auto pt-4 border-t border-white/5"},ue={key:0,class:"text-xs text-gray-500 self-center"},ge={class:"absolute top-4 right-4 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},pe=["onClick"],xe=["onClick"],me={key:2,class:"text-center py-20 text-gray-500"},be={key:3,class:"flex justify-center gap-2 mt-8"},fe=["disabled"],ye=["disabled"],je=V({__name:"PositionList",setup(ve){const m=T(),b=v([]),f=v(0),y=v(!1),i=M({page:1,page_size:12,category:""}),C=[{label:"全部",value:""},{label:"技术类",value:"技术类"},{label:"产品类",value:"产品类"},{label:"运营类",value:"运营类"},{label:"设计类",value:"设计类"},{label:"市场类",value:"市场类"}],$={junior:"初级",mid:"中级",senior:"高级",expert:"专家"},q={junior:"bg-success-900/30 text-success-400 border-success-800/50",mid:"bg-accent-900/30 text-accent-400 border-accent-800/50",senior:"bg-warning-900/30 text-warning-400 border-warning-800/50",expert:"bg-error-900/30 text-error-400 border-error-800/50"};async function g(){y.value=!0;try{const a=await S(i);b.value=a.data.items,f.value=a.data.total}catch(a){console.error("Failed to fetch positions:",a)}finally{y.value=!1}}function P(a){m.push(`/positions/${a}`)}function j(){m.push("/positions/create")}function D(a){m.push(`/positions/${a}/edit`)}async function N(a){if(confirm("确定要删除该岗位吗？"))try{await E(a),g()}catch(r){console.error("Delete failed:",r)}}return z(()=>{g()}),(a,r)=>(o(),s("div",J,[t("div",K,[t("div",O,[r[4]||(r[4]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gradient"}," 岗位管理 "),t("p",{class:"text-gray-400 mt-1"},"管理招聘岗位与面试要求")],-1)),t("button",{onClick:j,class:"btn-primary flex items-center gap-2"},[n(d(H),{class:"w-5 h-5"}),r[3]||(r[3]=t("span",null,"新建岗位",-1))])]),t("div",Q,[t("div",W,[n(d(R),{class:"w-5 h-5"}),r[5]||(r[5]=t("span",{class:"text-sm font-medium"},"筛选：",-1))]),B(t("select",{"onUpdate:modelValue":r[0]||(r[0]=e=>i.category=e),class:"bg-dark-900/50 border border-white/10 text-white text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5 outline-none backdrop-blur-sm transition-all hover:border-white/20"},[(o(),s(p,null,x(C,e=>t("option",{key:e.value,value:e.value},l(e.label||"全部分类"),9,X)),64))],512),[[F,i.category]])]),y.value?(o(),s("div",Y,[(o(),s(p,null,x(6,e=>t("div",{key:e,class:"h-48 bg-dark-900/50 rounded-xl animate-pulse border border-white/5"})),64))])):b.value.length>0?(o(),s("div",Z,[(o(!0),s(p,null,x(b.value,e=>{var h;return o(),s("div",{key:e.id,onClick:u=>P(e.id),class:"glass-card p-5 cursor-pointer flex flex-col h-full group hover:-translate-y-1 relative"},[t("div",te,[t("div",re,[t("div",se,[e.category?(o(),s("span",oe,l(e.category),1)):c("",!0),e.difficulty_level?(o(),s("span",{key:1,class:L(["px-2 py-0.5 rounded text-xs font-medium border",q[e.difficulty_level]||"bg-gray-800 text-gray-400 border-gray-700"])},l($[e.difficulty_level]||e.difficulty_level),3)):c("",!0)]),n(d(_),{class:"w-6 h-6 text-gray-500 group-hover:text-primary-400 transition-colors"})]),t("h3",ae,l(e.name),1),t("div",ie,[e.education_requirement?(o(),s("span",le,l(e.education_requirement),1)):c("",!0),t("div",ne,[n(d(U),{class:"w-3 h-3"}),k(" "+l(e.default_question_count)+" 题 ",1)]),t("div",de,[n(d(A),{class:"w-3 h-3"}),k(" "+l(e.default_duration)+" 分钟 ",1)])]),(h=e.required_skills)!=null&&h.length?(o(),s("div",ce,[(o(!0),s(p,null,x(e.required_skills.slice(0,3),u=>(o(),s("span",{key:u,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-dark-800/50 text-gray-400 border border-white/10"},l(u),1))),128)),e.required_skills.length>3?(o(),s("span",ue," +"+l(e.required_skills.length-3),1)):c("",!0)])):c("",!0)]),t("div",ge,[t("button",{onClick:w(u=>D(e.id),["stop"]),class:"p-1.5 rounded-lg bg-dark-800 hover:bg-dark-700 text-gray-300 hover:text-white border border-white/10 transition-colors",title:"编辑"},[n(d(G),{class:"w-4 h-4"})],8,pe),t("button",{onClick:w(u=>N(e.id),["stop"]),class:"p-1.5 rounded-lg bg-error-900/20 hover:bg-error-900/40 text-error-400 hover:text-error-300 border border-error-900/30 transition-colors",title:"删除"},[n(d(I),{class:"w-4 h-4"})],8,xe)])],8,ee)}),128))])):(o(),s("div",me,[n(d(_),{class:"w-16 h-16 mx-auto mb-4 opacity-20"}),r[6]||(r[6]=t("p",null,"暂无岗位，创建一个开始吧",-1))])),f.value>i.page_size?(o(),s("div",be,[t("button",{disabled:i.page===1,onClick:r[1]||(r[1]=e=>{i.page--,g()}),class:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," 上一页 ",8,fe),t("button",{disabled:i.page*i.page_size>=f.value,onClick:r[2]||(r[2]=e=>{i.page++,g()}),class:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," 下一页 ",8,ye)])):c("",!0)])]))}});export{je as default};
