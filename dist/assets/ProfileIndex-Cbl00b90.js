import{c as r,a as e,o,d as L,e as M,l as q,t as a,n as h,f as m,i as c,L as z,g as k,p as n,m as j,y as V,F as D,h as P,j as A,q as p}from"./index-B1_3jWiP.js";import{q as I,r as R}from"./question-DTEubUy6.js";import{r as F}from"./CheckCircleIcon-3dtCnVgF.js";import{r as E,a as Z}from"./XCircleIcon-wm93KZle.js";function G(N,_){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}const H={class:"min-h-screen p-6 lg:p-8"},J={class:"max-w-4xl mx-auto space-y-8 animate-fade-in"},K={class:"flex items-center gap-4"},O={class:"w-16 h-16 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 p-[2px]"},Q={class:"w-full h-full rounded-full bg-dark-950 flex items-center justify-center"},W={class:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-br from-primary-500 to-secondary-500"},X={class:"text-3xl font-bold text-white"},Y={class:"flex items-center gap-2 mt-1"},ee={class:"px-2 py-0.5 rounded text-xs font-medium bg-dark-800 text-gray-400 border border-white/10"},te={class:"text-sm text-gray-500"},se={class:"flex gap-6 border-b border-white/10"},re={class:"flex items-center gap-2"},oe={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-primary-500 rounded-t-full"},ae={class:"flex items-center gap-2"},le={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-primary-500 rounded-t-full"},ne={key:0,class:"glass-card p-6 space-y-6"},ie={class:"grid gap-6 max-w-md"},de={key:1,class:"space-y-6"},ue={class:"flex gap-2"},me={key:0,class:"ml-1 px-1.5 py-0.5 rounded-full bg-primary-500 text-white text-xs"},ce={key:0,class:"space-y-4"},pe={key:0,class:"text-center py-10"},ve={key:1,class:"grid gap-4"},xe={class:"flex items-center gap-4"},ge={class:"p-3 rounded-lg bg-dark-800 text-gray-400"},ye={class:"font-medium text-white"},fe={class:"text-sm text-gray-400"},be={class:"flex items-center gap-2 mt-1 text-xs text-gray-500"},he={class:"flex items-center gap-2"},_e=["onClick"],we=["onClick"],ke={key:2,class:"text-center py-20 text-gray-500 glass-card"},Ce={key:1,class:"glass-card p-6"},$e={class:"text-center py-10 text-gray-500"},Be={class:"mt-4 grid gap-2 opacity-50 pointer-events-none"},je={class:"text-xs bg-dark-800 px-2 py-1 rounded"},Fe=L({__name:"ProfileIndex",setup(N){const _=M(),i=A(()=>_.user),b=A(()=>_.isAdmin),l=p("profile"),d=p("review"),v=p({username:"",email:""}),x=p([]),w=p(!1);function S(){i.value&&(v.value={username:i.value.username,email:i.value.email||""})}async function C(){w.value=!0;try{const u=await I({page:1,page_size:100});x.value=u.data.items}catch(u){console.error("Failed to fetch pending banks:",u)}finally{w.value=!1}}async function $(u,t){var g,y;if(confirm(`确定要${t==="approve"?"通过":"拒绝"}该申请吗？`))try{await R(u,{action:t}),alert("操作成功"),C()}catch(f){console.error("Review failed:",f),alert(((y=(g=f.response)==null?void 0:g.data)==null?void 0:y.message)||"操作失败")}}const T=p([{id:"1",username:"admin",role:"admin",email:"admin@example.com"},{id:"2",username:"user1",role:"user",email:"user1@example.com"}]);return q(()=>{S(),b.value&&C()}),(u,t)=>{var g,y,f,B;return o(),r("div",H,[e("div",J,[e("div",K,[e("div",O,[e("div",Q,[e("span",W,a((((y=(g=i.value)==null?void 0:g.username)==null?void 0:y[0])||"U").toUpperCase()),1)])]),e("div",null,[e("h1",X,a((f=i.value)==null?void 0:f.username),1),e("div",Y,[e("span",ee,a(b.value?"管理员":"普通用户"),1),e("span",te,a(((B=i.value)==null?void 0:B.email)||"暂无邮箱"),1)])])]),e("div",se,[e("button",{onClick:t[0]||(t[0]=s=>l.value="profile"),class:h(["pb-3 px-2 text-sm font-medium transition-colors relative",l.value==="profile"?"text-primary-400":"text-gray-400 hover:text-gray-200"])},[e("div",re,[m(c(z),{class:"w-5 h-5"}),t[6]||(t[6]=k(" 个人信息 ",-1))]),l.value==="profile"?(o(),r("div",oe)):n("",!0)],2),b.value?(o(),r("button",{key:0,onClick:t[1]||(t[1]=s=>l.value="admin"),class:h(["pb-3 px-2 text-sm font-medium transition-colors relative",l.value==="admin"?"text-primary-400":"text-gray-400 hover:text-gray-200"])},[e("div",ae,[m(c(G),{class:"w-5 h-5"}),t[7]||(t[7]=k(" 管理控制台 ",-1))]),l.value==="admin"?(o(),r("div",le)):n("",!0)],2)):n("",!0)]),l.value==="profile"?(o(),r("div",ne,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-white"},"基本信息",-1)),e("div",ie,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"用户名",-1)),j(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value.username=s),type:"text",disabled:"",class:"w-full bg-dark-900/50 border border-white/10 rounded-lg px-4 py-2 text-gray-400 cursor-not-allowed"},null,512),[[V,v.value.username]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"邮箱",-1)),j(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>v.value.email=s),type:"email",disabled:"",class:"w-full bg-dark-900/50 border border-white/10 rounded-lg px-4 py-2 text-gray-400 cursor-not-allowed"},null,512),[[V,v.value.email]]),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 mt-1"},"如需修改个人信息请联系管理员",-1))])])])):b.value&&l.value==="admin"?(o(),r("div",de,[e("div",ue,[e("button",{onClick:t[4]||(t[4]=s=>d.value="review"),class:h(["px-4 py-2 rounded-lg text-sm font-medium transition-colors border",d.value==="review"?"bg-primary-900/20 text-primary-400 border-primary-500/30":"bg-dark-800 text-gray-400 border-white/5 hover:bg-dark-700"])},[t[12]||(t[12]=k(" 社区审核 ",-1)),x.value.length?(o(),r("span",me,a(x.value.length),1)):n("",!0)],2),e("button",{onClick:t[5]||(t[5]=s=>d.value="users"),class:h(["px-4 py-2 rounded-lg text-sm font-medium transition-colors border",d.value==="users"?"bg-primary-900/20 text-primary-400 border-primary-500/30":"bg-dark-800 text-gray-400 border-white/5 hover:bg-dark-700"])}," 用户管理 ",2)]),d.value==="review"?(o(),r("div",ce,[w.value?(o(),r("div",pe,[...t[13]||(t[13]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto"},null,-1)])])):x.value.length>0?(o(),r("div",ve,[(o(!0),r(D,null,P(x.value,s=>(o(),r("div",{key:s.id,class:"glass-card p-4 flex items-center justify-between group hover:border-primary-500/30 transition-colors"},[e("div",xe,[e("div",ge,[m(c(E),{class:"w-6 h-6"})]),e("div",null,[e("h3",ye,a(s.name),1),e("p",fe,a(s.description||"无描述"),1),e("div",be,[e("span",null,"申请人ID: "+a(s.created_by),1),t[14]||(t[14]=e("span",null,"•",-1)),e("span",null,a(new Date(s.created_at).toLocaleDateString()),1)])])]),e("div",he,[e("button",{onClick:U=>$(s.id,"approve"),class:"p-2 rounded-lg bg-success-900/20 text-success-400 hover:bg-success-900/40 transition-colors",title:"通过"},[m(c(F),{class:"w-5 h-5"})],8,_e),e("button",{onClick:U=>$(s.id,"reject"),class:"p-2 rounded-lg bg-error-900/20 text-error-400 hover:bg-error-900/40 transition-colors",title:"拒绝"},[m(c(Z),{class:"w-5 h-5"})],8,we)])]))),128))])):(o(),r("div",ke,[m(c(F),{class:"w-16 h-16 mx-auto mb-4 opacity-20"}),t[15]||(t[15]=e("p",null,"暂无待审核的社区内容",-1))]))])):n("",!0),d.value==="users"?(o(),r("div",Ce,[e("div",$e,[t[16]||(t[16]=e("p",null,"用户管理功能开发中...",-1)),e("div",Be,[(o(!0),r(D,null,P(T.value,s=>(o(),r("div",{key:s.id,class:"flex items-center justify-between p-3 bg-dark-900/30 rounded border border-white/5"},[e("span",null,a(s.username),1),e("span",je,a(s.role),1)]))),128))])])])):n("",!0)])):n("",!0)])])}}});export{Fe as default};
