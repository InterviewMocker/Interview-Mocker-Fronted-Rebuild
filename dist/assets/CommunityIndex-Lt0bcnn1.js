import{c as o,a as t,o as s,d as z,l as N,F as u,h as m,f as k,i as _,m as q,v as D,p as w,C as b,J as C,K as F,H as S,t as x,q as p,s as T,n as Z,g as E,u as H}from"./index-B1_3jWiP.js";import{a as I,c as J}from"./question-DTEubUy6.js";import{r as K,_ as P}from"./QuestionBankCard.vue_vue_type_script_setup_true_lang-DHONf-9o.js";import{r as R}from"./MagnifyingGlassIcon-16jXXFvc.js";import{r as U}from"./XCircleIcon-wm93KZle.js";import"./ClockIcon-Sdcm571c.js";import"./PencilIcon-Cx_SwFD1.js";import"./TrashIcon-dWnjABfe.js";function A($,h){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}const G={class:"min-h-screen p-6 lg:p-8"},O={class:"max-w-7xl mx-auto space-y-8 animate-fade-in"},Q={class:"flex gap-6 border-b border-white/10 overflow-x-auto"},W=["onClick"],X={class:"flex items-center gap-2"},Y={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-primary-500 rounded-t-full"},ee={class:"min-h-[400px]"},te={key:0,class:"space-y-6"},ae={class:"glass-nav rounded-xl p-4 border border-white/5 flex flex-wrap items-center gap-4"},se={class:"flex items-center gap-2 text-gray-400"},oe=["value"],ne={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},le={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},re={key:2,class:"text-center py-20 text-gray-500"},ie={key:3,class:"flex justify-center gap-2 mt-8"},de=["disabled"],ce=["disabled"],ue={key:1,class:"flex flex-col items-center justify-center py-20 text-gray-500"},me={class:"w-20 h-20 rounded-full bg-dark-800 flex items-center justify-center mb-6"},ke=z({__name:"CommunityIndex",setup($){const h=H(),r=p("banks"),v=p([]),g=p(!1),y=p(0),f=[{id:"banks",name:"题库",icon:U},{id:"knowledge",name:"知识库",icon:F},{id:"positions",name:"岗位",icon:S},{id:"interview",name:"精彩面试",icon:A}],n=T({page:1,page_size:12,category:""}),B=[{label:"全部",value:""},{label:"前端",value:"frontend"},{label:"后端",value:"backend"},{label:"算法",value:"algorithm"},{label:"系统设计",value:"system"}];async function i(){if(r.value==="banks"){g.value=!0;try{const l=await I(n);v.value=l.data.items,y.value=l.data.total}catch(l){console.error("Failed to fetch community banks:",l)}finally{g.value=!1}}}function L(){n.page=1,i()}function M(l){h.push(`/questions/banks/${l}`)}async function V(l){var a,d;if(confirm("确定要复制该题库到我的题库吗？"))try{await J(l),alert('复制成功！已添加到"我的题库"')}catch(c){console.error("Copy failed:",c),alert(((d=(a=c.response)==null?void 0:a.data)==null?void 0:d.message)||"复制失败")}}return N(()=>{i()}),(l,a)=>{var d,c;return s(),o("div",G,[t("div",O,[a[6]||(a[6]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gradient"}," 社区中心 "),t("p",{class:"text-gray-400 mt-1"},"发现优秀的面试资源，与社区共同成长")],-1)),t("div",Q,[(s(),o(u,null,m(f,e=>t("button",{key:e.id,onClick:j=>{r.value=e.id,e.id==="banks"&&i()},class:Z(["pb-3 px-2 text-sm font-medium transition-colors relative whitespace-nowrap",r.value===e.id?"text-primary-400":"text-gray-400 hover:text-gray-200"])},[t("div",X,[(s(),b(C(e.icon),{class:"w-5 h-5"})),E(" "+x(e.name),1)]),r.value===e.id?(s(),o("div",Y)):w("",!0)],10,W)),64))]),t("div",ee,[r.value==="banks"?(s(),o("div",te,[t("div",ae,[t("div",se,[k(_(R),{class:"w-5 h-5"}),a[3]||(a[3]=t("span",{class:"text-sm font-medium"},"筛选：",-1))]),q(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.category=e),onChange:L,class:"bg-dark-900/50 border border-white/10 text-white text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5 outline-none backdrop-blur-sm transition-all hover:border-white/20"},[(s(),o(u,null,m(B,e=>t("option",{key:e.value,value:e.value},x(e.label||"全部分类"),9,oe)),64))],544),[[D,n.category]])]),g.value?(s(),o("div",ne,[(s(),o(u,null,m(6,e=>t("div",{key:e,class:"h-48 bg-dark-900/50 rounded-xl animate-pulse border border-white/5"})),64))])):v.value.length>0?(s(),o("div",le,[(s(!0),o(u,null,m(v.value,e=>(s(),b(P,{key:e.id,bank:e,"is-community-view":!0,onClick:j=>M(e.id),onCopy:V},null,8,["bank","onClick"]))),128))])):(s(),o("div",re,[k(_(K),{class:"w-16 h-16 mx-auto mb-4 opacity-20"}),a[4]||(a[4]=t("p",null,"社区暂时没有公开的题库",-1))])),y.value>n.page_size?(s(),o("div",ie,[t("button",{disabled:n.page===1,onClick:a[1]||(a[1]=e=>{n.page--,i()}),class:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," 上一页 ",8,de),t("button",{disabled:n.page*n.page_size>=y.value,onClick:a[2]||(a[2]=e=>{n.page++,i()}),class:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," 下一页 ",8,ce)])):w("",!0)])):(s(),o("div",ue,[t("div",me,[(s(),b(C((d=f.find(e=>e.id===r.value))==null?void 0:d.icon),{class:"w-10 h-10 opacity-50"}))]),a[5]||(a[5]=t("h3",{class:"text-xl font-medium text-gray-300 mb-2"},"功能开发中",-1)),t("p",null,x((c=f.find(e=>e.id===r.value))==null?void 0:c.name)+"模块即将上线，敬请期待",1)]))])])])}}});export{ke as default};
